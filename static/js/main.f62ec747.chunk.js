(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{55:function(e,t,n){},56:function(e,t){},89:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(39),o=n.n(c),s=(n(55),n(6)),u=n(9),i=n.n(u);function d(e){return i.a.enc.Base64.stringify(e)}function b(e,t){var n=i.a.SHA256(t),a=i.a.lib.WordArray.random(16),r={iv:a,mode:i.a.mode.CBC},c=i.a.AES.encrypt(e,n,r);return a.concat(c.ciphertext),d(a)}function l(e,t){var n=i.a.enc.Base64.parse(e),a=i.a.SHA256(t),r=i.a.lib.WordArray.random(16),c=r.words.length,o=n.words.length,s=i.a.lib.WordArray.create(n.words.slice(c,o)),u=i.a.lib.WordArray.create(n.words.slice(0,r.words.length+1));s=d(s);var b,l={iv:u,mode:i.a.mode.CBC},j=i.a.AES.decrypt(s,a,l);return b=j,i.a.enc.Utf8.stringify(b)}var j=n(10),p=n(12),h=n(2),O=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),r=n[0],c=n[1],o=function(){var t=Object(p.a)(Object(j.a)().mark((function t(n){return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.loginCallback(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"card",children:Object(h.jsxs)("form",{onSubmit:o,children:[Object(h.jsx)("input",{value:r,onChange:function(e){var t=e.target;c(t.value)},name:"password",type:"text"}),Object(h.jsx)("button",{className:"btn submit-btn",type:"submit",children:"Go"})]})})},f=n(46),g=["January","February","March","April","May","June","July","August","September","October","November","December"],v=function(){var e=Object(p.a)(Object(j.a)().mark((function e(t,n,a){var r,c,o,s,u,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l(t,a),c=JSON.parse(r),o=n.getFullYear(),s=g[n.getMonth()],u=n.getDate(),i={f:0,s:0,a:0,t:0,sl:0,m:0,w:0},o in c){e.next=8;break}return e.abrupt("return",i);case 8:if(s in c[o]){e.next=10;break}return e.abrupt("return",i);case 10:if(u in c[o][s]){e.next=12;break}return e.abrupt("return",i);case 12:return e.abrupt("return",c[o][s][u]);case 13:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),m=n(34);function x(e,t,n,a,r){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(Object(j.a)().mark((function e(t,n,a,r,c){var o,s,u;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c,e.prev=1,e.next=4,m.a.get("https://api.github.com/repos/".concat(t,"/contents/").concat(a),{headers:{Authorization:"Token ".concat(o)}});case 4:return s=e.sent,u=s.data.sha,e.next=8,m.a.put("https://api.github.com/repos/".concat(t,"/contents/").concat(a),{message:"commit from js",content:btoa(r),sha:u},{headers:{Authorization:"Token ".concat(o)}});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}var S=function(e){var t=Object(a.useState)(0),n=Object(s.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(0),u=Object(s.a)(o,2),i=u[0],d=u[1],O=Object(a.useState)(0),f=Object(s.a)(O,2),m=f[0],y=f[1],S=Object(a.useState)(0),C=Object(s.a)(S,2),k=C[0],w=C[1],I=Object(a.useState)(0),A=Object(s.a)(I,2),N=A[0],J=A[1],D=Object(a.useState)(0),F=Object(s.a)(D,2),E=F[0],B=F[1],H=Object(a.useState)(0),M=Object(s.a)(H,2),T=M[0],W=M[1];function U(){return(U=Object(p.a)(Object(j.a)().mark((function t(){var n,a;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"sandrolex/sandrolex.github.io","main","db.json",n=JSON.stringify(e.db),a=l(e.db.d1,e.password),t.next=7,x("sandrolex/sandrolex.github.io","main","db.json",n,a);case 7:if(t.sent){t.next=11;break}e.msgHandler("Error: could not commit file",!0),t.next=12;break;case 11:e.msgHandler("Commit SUCCESS",!1);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){v(e.db.d2,e.date,e.password).then((function(e){c(e.f),d(e.s),y(e.a),w(e.t),J(e.sl),B(e.m),W(e.w)}))}),[e.db.d2,e.date,e.password]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{children:e.date.toLocaleDateString("en-GB")}),Object(h.jsxs)("div",{children:["Food:",Object(h.jsx)("input",{type:"radio",value:"1",name:"food",checked:1===r,onChange:function(e){return c(parseInt(e.target.value))}}),"1",Object(h.jsx)("input",{type:"radio",value:"2",name:"food",checked:2===r,onChange:function(e){return c(parseInt(e.target.value))}}),"2",Object(h.jsx)("input",{type:"radio",value:"3",name:"food",checked:3===r,onChange:function(e){return c(parseInt(e.target.value))}})," 3"]}),Object(h.jsxs)("div",{children:["Sport:",Object(h.jsx)("input",{type:"radio",value:"1",name:"sport",checked:1===i,onChange:function(e){return d(parseInt(e.target.value))}})," 1",Object(h.jsx)("input",{type:"radio",value:"2",name:"sport",checked:2===i,onChange:function(e){return d(parseInt(e.target.value))}})," 2",Object(h.jsx)("input",{type:"radio",value:"3",name:"sport",checked:3===i,onChange:function(e){return d(parseInt(e.target.value))}})," 3"]}),Object(h.jsxs)("div",{children:["Alcool:",Object(h.jsx)("input",{type:"radio",value:"1",name:"alcool",checked:1===m,onChange:function(e){return y(parseInt(e.target.value))}})," 1",Object(h.jsx)("input",{type:"radio",value:"2",name:"alcool",checked:2===m,onChange:function(e){return y(parseInt(e.target.value))}})," 2",Object(h.jsx)("input",{type:"radio",value:"3",name:"alcool",checked:3===m,onChange:function(e){return y(parseInt(e.target.value))}})," 3"]}),Object(h.jsxs)("div",{children:["Tabac:",Object(h.jsx)("input",{type:"radio",value:"1",name:"tabac",checked:1===k,onChange:function(e){return w(parseInt(e.target.value))}})," 1",Object(h.jsx)("input",{type:"radio",value:"2",name:"tabac",checked:2===k,onChange:function(e){return w(parseInt(e.target.value))}})," 2"]}),Object(h.jsxs)("div",{children:["Sleep:",Object(h.jsx)("input",{type:"radio",value:"1",name:"sleep",checked:1===N,onChange:function(e){return J(parseInt(e.target.value))}})," 1",Object(h.jsx)("input",{type:"radio",value:"2",name:"sleep",checked:2===N,onChange:function(e){return J(parseInt(e.target.value))}})," 2"]}),Object(h.jsxs)("div",{children:["Mood:",Object(h.jsx)("input",{type:"radio",value:"1",name:"mood",checked:1===E,onChange:function(e){return B(parseInt(e.target.value))}})," 1",Object(h.jsx)("input",{type:"radio",value:"2",name:"mood",checked:2===E,onChange:function(e){return B(parseInt(e.target.value))}})," 2"]}),Object(h.jsxs)("div",{children:["Weight:",Object(h.jsx)("input",{type:"text",name:"weight",value:T.toString(),onChange:function(e){return W(parseInt(e.target.value))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){var t={food:parseInt(r),sport:parseInt(i),alcool:parseInt(m),tabac:parseInt(k),sleep:parseInt(N),mood:parseInt(E),weight:parseInt(T),date:e.date};e.db.d2=function(e,t,n){var a=l(e,n),r=t.date.getFullYear(),c=g[t.date.getMonth()],o=t.date.getDate(),s={f:t.food,s:t.sport,a:t.alcool,t:t.tabac,sl:t.sleep,m:t.mood,w:t.weight},u=JSON.parse(a);return r in u||(u[r]={}),c in u[r]||(u[r][c]={}),u[r][c][o]=s,b(JSON.stringify(u),n)}(e.db.d2,t,e.password),e.msgHandler("Add SUCCESS",!1)},children:"Add"}),"\xa0",Object(h.jsx)("button",{onClick:function(){e.db.d2=function(e,t,n){var a=l(e,n),r=JSON.parse(a),c=t.getFullYear(),o=g[t.getMonth()],s=t.getDate();return c in r&&o in r[c]?(delete r[c][o][s],b(JSON.stringify(r),n)):e}(e.db.d2,e.date,e.password),e.msgHandler("Del SUCCESS",!1)},children:"Del"}),"\xa0",Object(h.jsx)("button",{onClick:function(){return U.apply(this,arguments)},children:"Commit"}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{})]})]})},C=function(e){if(""===e.message)return Object(h.jsx)(h.Fragment,{});var t=e.error?"error-message":"ok-message",n=e.error?"error-text":"ok-text";return Object(h.jsx)("div",{className:t,children:Object(h.jsx)("span",{className:n,children:e.message})})},k=function(e){var t=Object(a.useState)(new Date),n=Object(s.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),u=Object(s.a)(o,2),i=u[0],d=u[1],b=Object(a.useState)(""),l=Object(s.a)(b,2),j=l[0],p=l[1];return Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)(f.a,{value:r,onChange:function(e){c(e),d(!1),p("")}}),Object(h.jsx)(S,{date:r,db:e.db,password:e.password,msgHandler:function(e,t){""!==e&&(p(e),d(t))}}),Object(h.jsx)(C,{message:j,error:i})]})};var w=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),o=Object(s.a)(c,2),u=o[0],i=o[1],d=Object(a.useState)("false"),b=Object(s.a)(d,2),j=b[0],p=b[1];return Object(a.useEffect)((function(){var e=window.location.host,t="http://";e.includes("github")&&(t="https://"),fetch(t+e+"/db.json").then((function(e){return e.json()})).then((function(e){i(e)})).catch((function(e){console.log(e," error")}))}),[]),"false"===j?Object(h.jsx)(O,{loginCallback:function(e){r(e),"true"===l(u.d3,e)?p("true"):console.log("failed")},d3:u.d3}):Object(h.jsx)("div",{className:"container",children:Object(h.jsx)(k,{password:n,db:u})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,90)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.createRoot(document.getElementById("root")).render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(w,{})})),I()}},[[89,1,2]]]);
//# sourceMappingURL=main.f62ec747.chunk.js.map